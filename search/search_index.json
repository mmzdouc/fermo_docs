{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"About","text":""},{"location":"#fermo-documentation","title":"FERMO Documentation","text":"<p>FERMO is a dashboard application for metabolomics data analysis, with automated integration of genomics, phenotypical, and environmental (meta)data. </p> <ul> <li>FERMO GUI describes the usage and functionality of the dashboard application.</li> <li><code>fermo_core</code> describes the data processing and analysis functionality of FERMO</li> </ul> <p>This documentation has been last updated for FERMO version 1.0.0.</p>"},{"location":"#how-to-use-this-documentation","title":"How to use this documentation","text":"<ul> <li>Home: describes the usage and applicability of FERMO</li> <li>Modules: serves as reference to the individual modules integrated into FERMO</li> <li>For Developers: materials for people interested in expanding the functionality of FERMO.</li> </ul>"},{"location":"#about","title":"About","text":""},{"location":"#websites","title":"Websites","text":"<ul> <li>FERMO Online: the online version of FERMO.</li> <li>fermo_gui: repository of the graphical user interface frontend</li> <li>fermo_core: repository of the processing pipeline</li> </ul>"},{"location":"#license","title":"License","text":"<p>FERMO is open source software freely available under the permissive MIT License.</p>"},{"location":"#publication","title":"Publication","text":"<p>See FERMO online for information on citing <code>fermo_core</code>.</p>"},{"location":"#acknowledgements-and-funding","title":"Acknowledgements and Funding","text":"This work was funded by the European Union Horizon 2020 project MARBLES [101000392] This work was supported by the Netherlands Organization for Scientific Research (NWO) KIC grant KICH1.LWV04.21.013"},{"location":"for_devs/architecture/","title":"Architecture","text":""},{"location":"for_devs/architecture/#overall-organization","title":"Overall organization","text":"<p><code>fermo_core</code> can be categorized into three parts:</p> <ul> <li>Data input/output: parses and assigns input and output parameters, performs data input validations, manages export</li> <li>Data processing: parses input files, creates objects to hold feature and sample information</li> <li>Data analysis: performs individual analysis steps, such as annotation and filtering.</li> </ul>"},{"location":"for_devs/architecture/#design-patterns","title":"Design patterns","text":"<p><code>fermo_core</code> follows design patterns where appropriate and extensively uses the manager design pattern: a class that is responsible for managing and  calling in other classes with similar functionality. The most important manager classes are:</p> <ul> <li>ParameterManager: manages classes containing (input) parameters.</li> <li>GeneralParser: manages all file parser classes</li> <li>AnalysisManager: manages all data analysis and annotation classes</li> <li>ExportManager: manages data export classes</li> </ul>"},{"location":"for_devs/architecture/#data-storage","title":"Data storage","text":"<p>Data storage in <code>fermo_core</code> is concentrated in a few centralized classes which are modified by all other classes. The only exception is the ParameterManager, which stores parameters, but is never modified (except by initial user data input). The data storage classes are:</p> <ul> <li>The Stats class, which stores overall and general information. Only a single Stats object is instantiated per analysis run.</li> <li>The Feature class, which stores feature-related data. Is instantiated either as \u201cGeneral feature\u201d (stores general information) or \u201cSample-specific\u201d feature (storing sample-specific information. Instances of the Feature class are always stored in a Repository (following the repository design pattern)</li> <li>The Sample class, which stores sample-specific information. Instances of the Sample class are always stored in a Repository (following the repository design pattern).</li> </ul>"},{"location":"for_devs/new_features/","title":"New features","text":"<p>This is a short step-by-step guide on how to add new functionality:</p> <ul> <li>Modify the params.json and the schema.json files to add the parameters of the new class and their descriptions. Do not hardcode values. Respect the different categories: <code>files</code>, <code>core_modules</code> (run by default), <code>additional_modules</code> (do not run by default).</li> <li>Add an input handling class, add validation methods, and implement it into the ParameterManger. Write appropriate tests.</li> <li>If data parsing is performed, add the appropriate parser to GeneralParser. Write appropriate tests and provide example files.</li> <li>Add an appropriate analysis class and implement it into the AnalysisManager class. Write appropriate tests.</li> <li>Implement the appropriate export methods in the ExportManager (to json, csv, or summary). Write appropriate tests.</li> <li>Increment the version in pyproject.toml</li> <li>Update the online documentation with a description of the module, its algorithm, the parameters, and the limitations.</li> <li>Implement the appropriate input forms into fermo_gui to run your module.</li> <li>Implement appropriate search/filtering options to search for your results on fermo_gui.</li> </ul>"},{"location":"for_devs/overview/","title":"Overview","text":"<p><code>fermo_core</code> is a Python data processing pipeline focusing on robust and reproducible analysis. It follows:</p> <ul> <li>modular, object-oriented programming</li> <li>test-driven development </li> <li>clean code and good software craftsmanship principles</li> <li>good documentation and logging practices.</li> </ul> <p>For more information on principles we follow and on how to contribute code, please consult CONTRIBUTING.</p>"},{"location":"for_devs/overview/#getting-started","title":"Getting started","text":"<ul> <li>Install <code>python 3.11.x</code></li> <li>Install hatch (e.g. with <code>pipx install hatch</code>)</li> <li>Clone the repository</li> <li>(Change into the fermo_core base directory if not already present) </li> <li>Install the package with developer dependencies <code>hatch -v env create dev</code></li> <li>Install pre-commit with <code>hatch run dev:pre-commit install</code></li> <li>Run test suite with <code>hatch run test:pytest --run_slow --run_high_cpu</code> - all test should pass</li> </ul>"},{"location":"home/core.installation/","title":"Installation","text":"<p><code>fermo_core</code> is a Python-based command line tool. While primarily intended to be the backend processing module of <code>fermo_gui</code> of the application FERMO, <code>fermo_core</code> can be used independently for large-scale data processing and analysis.</p> <p>Nota Bene: <code>fermo_core</code> is intended to run on Linux and has only been tested on Ubuntu Linux. No support for other operating systems is planned.</p>"},{"location":"home/core.installation/#installation","title":"Installation","text":""},{"location":"home/core.installation/#with-hatch","title":"With <code>hatch</code>","text":"<ul> <li>Install <code>python 3.11.x</code></li> <li>Install hatch (e.g. with <code>pipx install hatch</code>)</li> <li>Download or clone the <code>fermo_core</code> repository</li> <li>(Change into the fermo_core base directory if not already present)</li> <li>Run <code>hatch -v env create</code></li> <li>Once installed, run as specified in Usage</li> </ul>"},{"location":"home/core.installation/#with-conda","title":"With <code>conda</code>","text":"<ul> <li>Download or clone this repository</li> <li>Install conda</li> <li>Create a conda environment with <code>conda create --name fermo_core python=3.11</code></li> <li>Activate the conda environment with <code>conda activate fermo_core</code></li> <li>Download or clone the <code>fermo_core</code> repository</li> <li>(Change into the fermo_core base directory if not already present)</li> <li>Run <code>pip install -e .</code></li> <li>Once installed, run as specified in Usage</li> </ul>"},{"location":"home/core.overview/","title":"Overview","text":""},{"location":"home/core.overview/#overview-fermo_core","title":"Overview <code>fermo_core</code>","text":"<p>FERMO consists of two parts:</p> <ul> <li><code>fermo_gui</code>: the dashboard graphical user interface. </li> <li><code>fermo_core</code>: the data processing and analysis pipeline (the backend).</li> </ul> <p>This part of the documentation describes <code>fermo_core</code> in more detail.</p>"},{"location":"home/core.overview/#who-is-fermo_core-for","title":"Who is <code>fermo_core</code> for?","text":"<p>While <code>fermo_core</code> is primarily intended to be the data processing backend of <code>fermo_gui</code>, it can also be used as a command line application. </p> <p>Nota bene: <code>fermo_core</code> is not very beginner-friendly, and requires some experience with command line tools. For a more user-friendly version, please see <code>fermo_gui</code>.</p>"},{"location":"home/core.overview/#why-use-fermo_core","title":"Why use <code>fermo_core</code>?","text":"<p>As command line application, <code>fermo_core</code> can be used for large scale data analysis, design-of-experiment, and data processing automation. <code>fermo_core</code> does not come with its own data visualization, but the produced files can be either uploaded in the <code>fermo_gui</code> or used in downstream processing tools.</p>"},{"location":"home/core.parameters/","title":"Parameters","text":"<p>The most important element of a <code>fermo_core</code> run is the <code>parameters.json</code> file, which specifies all files and run parameters. This file is also generated in the background if <code>fermo gui</code> is being used. </p> <p>The <code>parameters.json</code> file follows this json-schema and an example can be found here.</p> <p><code>fermo_core</code> automatically checks the user-provided parameters file and fails with an error message if the formatting is incorrect.</p>"},{"location":"home/core.parameters/#specifications-parametersjson","title":"Specifications <code>parameters.json</code>","text":"<p>The <code>parameters.json</code> file is separated in three parts:</p> <ul> <li><code>files</code>: references to input files, paths, and locations</li> <li><code>core_modules</code>: modules that are generally applicable and only require a peaktable and MS/MS information (enabled by default)</li> <li><code>additional_modules</code>: modules requiring specific input files (disabled by default)</li> </ul> <p>Detailed information on modules and functions of parameters can be found on the Modules pages.</p>"},{"location":"home/core.parameters/#files-mandatory","title":"<code>files</code> (mandatory)","text":"<p>Nota bene: If a filetype is not provided, the corresponding parameter entry must be omitted.</p>"},{"location":"home/core.parameters/#peaktable-mandatory","title":"<code>peaktable</code> (mandatory)","text":"Key Possible Values Required filepath (the filepath) True format mzmine3 True polarity positive, negative True"},{"location":"home/core.parameters/#msms-optional","title":"<code>msms</code> (optional)","text":"<p>Nota bene: By default, fragment peaks with an intensity lower than 0.01 are removed. To disable filtering, set <code>rel_int_from</code> to <code>0.0</code></p> Key Possible Values Required Default filepath (the filepath) True N/A format mgf True N/A rel_int_from 0.0-1.0 False 0.01"},{"location":"home/core.parameters/#phenotype-optional","title":"<code>phenotype</code> (optional)","text":"Key Possible Values Required filepath (the filepath) True format qualitative, quantitative-percentage, quantitative-concentration True"},{"location":"home/core.parameters/#group_metadata-optional","title":"<code>group_metadata</code> (optional)","text":"Key Possible Values Required filepath (the filepath) True format fermo True"},{"location":"home/core.parameters/#spectral_library-optional","title":"<code>spectral_library</code> (optional)","text":"Key Possible Values Required filepath (the filepath) True format mgf True"},{"location":"home/core.parameters/#ms2query_results-optional","title":"<code>ms2query_results</code> (optional)","text":"Key Possible Values Required Default filepath (the filepath) True N/A score_cutoff 0.0-1.0 False 0.7"},{"location":"home/core.parameters/#as_results-optional","title":"<code>as_results</code> (optional)","text":"Key Possible Values Required Default directory_path (the directory path) True N/A similarity_cutoff 0.0-1.0 False 0.7"},{"location":"home/core.parameters/#core_modules-optional","title":"<code>core_modules</code> (optional)","text":""},{"location":"home/core.parameters/#adduct_annotation-optional","title":"<code>adduct_annotation</code> (optional)","text":"Key Possible Values Required Default activate_module true, false True true mass_dev_ppm 0-100.0 False 10.0"},{"location":"home/core.parameters/#neutral_loss_annotation-optional","title":"<code>neutral_loss_annotation</code> (optional)","text":"Key Possible Values Required Default activate_module true, false True true mass_dev_ppm 0-100.0 False 10.0 nonbiological true, false False false"},{"location":"home/core.parameters/#fragment_annotation-optional","title":"<code>fragment_annotation</code> (optional)","text":"Key Possible Values Required Default activate_module true, false True true mass_dev_ppm 0-100.0 False 10.0"},{"location":"home/core.parameters/#spec_sim_networking-optional","title":"<code>spec_sim_networking</code> (optional)","text":""},{"location":"home/core.parameters/#modified_cosine-optional","title":"<code>modified_cosine</code> (optional)","text":"Key Possible Values Required Default activate_module true, false True true msms_min_frag_nr  &gt;=1  False 5 fragment_tol  &gt;0  False 0.1 score_cutoff 0.0-1.0 False 0.7 max_nr_links  &gt;=1  False 10 maximum_runtime  &gt;=0  False 0 (unlimited)"},{"location":"home/core.parameters/#ms2deepscore-optional","title":"<code>ms2deepscore</code> (optional)","text":"Key Possible Values Required Default activate_module true, false True true msms_min_frag_nr  &gt;=1  False 5 score_cutoff 0.0-1.0 False 0.8 max_nr_links  &gt;=1  False 10 maximum_runtime  &gt;=0  False 0 (unlimited)"},{"location":"home/core.parameters/#additional_modules-optional","title":"<code>additional_modules</code> (optional)","text":""},{"location":"home/core.parameters/#feature_filtering-optional","title":"<code>feature_filtering</code> (optional)","text":"Key Possible Values Required Default activate_module true, false True false filter_rel_int_range_min 0.0-1.0 False 0.0 filter_rel_int_range_max 0.0-1.0 False 1.0 filter_rel_area_range_min 0.0-1.0 False 0.0 filter_rel_area_range_max 0.0-1.0 False 1.0"},{"location":"home/core.parameters/#blank_assignment-optional","title":"<code>blank_assignment</code> (optional)","text":"Key Possible Values Required Default activate_module true, false True false factor &gt;=1 False 10 algorithm mean, median, maximum False mean value height, area False area"},{"location":"home/core.parameters/#group_factor_assignment-optional","title":"<code>group_factor_assignment</code> (optional)","text":"Key Possible Values Required Default activate_module true, false True false algorithm mean, median, maximum False mean value height, area False area"},{"location":"home/core.parameters/#phenotype_assignment-optional","title":"<code>phenotype_assignment</code> (optional)","text":""},{"location":"home/core.parameters/#qualitative-optional","title":"<code>qualitative</code> (optional)","text":"Key Possible Values Required Default activate_module true, false True false factor &gt;=1 False 10 algorithm minmax, median, mean False minmax value height, area False area"},{"location":"home/core.parameters/#quantitative-percentage-optional","title":"<code>quantitative-percentage</code> (optional)","text":"Key Possible Values Required Default activate_module true, false True false sample_avg mean, median False mean value area False area algorithm pearson False pearson p_val_cutoff 0.0-1.0 False 0.05 coeff_cutoff 0.0-1.0 False 0.7"},{"location":"home/core.parameters/#quantitative-concentration-optional","title":"<code>quantitative-concentration</code> (optional)","text":"Key Possible Values Required Default activate_module true, false True false sample_avg mean, median False mean value area False area algorithm pearson False pearson p_val_cutoff 0.0-1.0 False 0.05 coeff_cutoff 0.0-1.0 False 0.7"},{"location":"home/core.parameters/#spectral_library_matching-optional","title":"<code>spectral_library_matching</code> (optional)","text":""},{"location":"home/core.parameters/#modified_cosine-optional_1","title":"<code>modified_cosine</code> (optional)","text":"Key Possible Values Required Default activate_module true, false True false min_nr_matched_peaks  &gt;=1  False 5 fragment_tol  &gt;0  False 0.1 score_cutoff 0.0-1.0 False 0.7 max_precursor_mass_diff  &gt;=1  False 600 maximum_runtime  &gt;=0  False 0 (unlimited)"},{"location":"home/core.parameters/#ms2deepscore-optional_1","title":"<code>ms2deepscore</code> (optional)","text":"Key Possible Values Required Default activate_module true, false True false score_cutoff 0.0-1.0 False 0.8 max_precursor_mass_diff  &gt;=1  False 600 maximum_runtime  &gt;=0  False 0 (unlimited)"},{"location":"home/core.parameters/#as_kcb_matching-optional","title":"<code>as_kcb_matching</code> (optional)","text":""},{"location":"home/core.parameters/#modified_cosine-optional_2","title":"<code>modified_cosine</code> (optional)","text":"Key Possible Values Required Default activate_module true, false True false min_nr_matched_peaks  &gt;=1  False 5 fragment_tol  &gt;0  False 0.1 score_cutoff 0.0-1.0 False 0.5 max_precursor_mass_diff  &gt;=1  False 600 maximum_runtime  &gt;=0  False 0 (unlimited)"},{"location":"home/core.parameters/#ms2deepscore-optional_2","title":"<code>ms2deepscore</code> (optional)","text":"Key Possible Values Required Default activate_module true, false True false score_cutoff 0.0-1.0 False 0.7 max_precursor_mass_diff  &gt;=1  False 600 maximum_runtime  &gt;=0  False 0 (unlimited)"},{"location":"home/gui.dashboard/","title":"Usage","text":"<p>The Dashboard is the main page of FERMO GUI.  It allows the perform data inspection and analysis and to download generated files for further use.</p> <p>Nota bene: this documentation has been written using an example dataset, which can be accessed using the 'Example' tab in FERMO Online.  The underlying data is a subset from this study and can be obtained from Zenodo.</p>"},{"location":"home/gui.dashboard/#dashboard-elements","title":"Dashboard Elements","text":""},{"location":"home/gui.dashboard/#main-chromatogram","title":"Main chromatogram","text":"<p>The Main chromatogram view is the core of the data visualization.  It allows to access information on molecular features, their annotations, and relatedness. Clicking a peak triggers the sequence similarity visualization as chromatogram (showing releated features in the active sample) and as network (showing related features in the whole dataset.)</p> <p>Nota bene: the peaks (extracted ion chromatograms) are actually pseudo-chromatograms, reconstructed from the peaktable data. They are only an abstraction of the original data and may not always represent the original peak shape appropriately.</p>"},{"location":"home/gui.dashboard/#example","title":"Example","text":"<p>In the example, we inspect the molecular feature with the ID 15 by clicking it.  This feature has multiple related features present in the sample and in the dataset. When we inspect the *Molecular feature info\" we see that it has been annotated as chymostatin-like molecule.</p> <p></p>"},{"location":"home/gui.dashboard/#general-information","title":"General information","text":"<p>The General information displays a summary of the analysis run.</p>"},{"location":"home/gui.dashboard/#example_1","title":"Example","text":"<p>In the example, we see that 143 molecular features from 11 samples were processed. 74 features were removed due to the filter settings. We can also see the run date and the version of <code>fermo_core</code> that was used.</p> <p></p>"},{"location":"home/gui.dashboard/#sample-overview","title":"Sample overview","text":"<p>The Sample overview gives an overview of the samples in the analysis. It also shows the Retained features, that is, which features have been selected by the filter settings. Further, it displays sample scores and group affiliation of the samples. A click on a sample name changes the visualization in the Main Chromatogram.</p>"},{"location":"home/gui.dashboard/#example_2","title":"Example","text":"<p>In the example, we click through some of the samples. Since we have not set any filters, the numbers in Total features and Retained Features are identical. We then look for the sample with the highest diversity, specificity, and mean novelty score.</p> <p></p>"},{"location":"home/gui.dashboard/#molecular-feature-info","title":"Molecular feature info","text":"<p>The Molecular feature info gives more information on the selected molecular features. This includes general information, annotation information, abundance across groups and samples.</p>"},{"location":"home/gui.dashboard/#example_3","title":"Example","text":"<p>In the example, we inspect the feature ID 83.  We see that it has been annotated as a siomycin-like compound. It also has an annotation to be phenotype-associated. Further, it has been annotated by the Adduct, Fragment, and Neutral loss modules.</p> <p></p>"},{"location":"home/gui.dashboard/#spectral-similarity-networking","title":"Spectral similarity networking","text":"<p>The Spectral similarity networking displays the spectral similarity network (also known as molecular networks) the selected feature is associated with. FERMO can calculate these networks with different algorithms, which result in different network topologies.</p>"},{"location":"home/gui.dashboard/#example_4","title":"Example","text":"<p>In the example, we inspect a network that shows very different topologies dependent on the algorithm used. We inspect the nodes and edges, and use the network view to quickly cycle through the features.</p> <p></p>"},{"location":"home/gui.dashboard/#filters","title":"Filters","text":"<p>The Fiters are a useful element of the data analysis: they allow to quickly focus attention on the most relevant features for the respective research questions. Filters can be stacked to allow for specific research questions. The filter settings also update the Retained features number in the Sample overview. </p> <p>Nota bene: we are currently working on further improving filter settings.</p>"},{"location":"home/gui.dashboard/#novelty-score-filter","title":"Novelty score filter","text":"<p>Allows to filter for the Novelty score.</p>"},{"location":"home/gui.dashboard/#hide-blanks","title":"Hide blanks","text":"<p>Allows to hide blank-annotated features (see here).</p>"},{"location":"home/gui.dashboard/#hide-unannotated-features","title":"Hide unannotated features","text":"<p>Allows to hide all features that do not have any annotations.  This also triggers the availability of additional filters.</p>"},{"location":"home/gui.dashboard/#match-score-filter","title":"Match score filter","text":"<p>Allows to filter for (spectral) library matches in a certain range.</p>"},{"location":"home/gui.dashboard/#phenotype-score-filter","title":"Phenotype score filter","text":"<p>Allows to filter for a Phenotype score in a certain range (only showing phenotype/bioactivity-associated features).</p>"},{"location":"home/gui.dashboard/#find-feature","title":"Find feature","text":"<p>Allows to search for a specific feature ID.</p>"},{"location":"home/gui.dashboard/#precursor-mz-filter","title":"Precursor m/z filter","text":"<p>Allows to search for a precursor m/z range</p>"},{"location":"home/gui.dashboard/#sample-filter","title":"Sample filter","text":"<p>Allows to select features that have been observed in a minimum and/or maximum number of samples.</p>"},{"location":"home/gui.dashboard/#fold-change-filter","title":"Fold-change filter","text":"<p>Allows to select features that are n-times more abundant across one group versus another group in a certain category.</p>"},{"location":"home/gui.dashboard/#show-only-selected-group-feature","title":"Show only selected group feature","text":"<p>Allows to show only features that are in a selected group</p>"},{"location":"home/gui.dashboard/#exclude-feature-with-specific-network-groups","title":"Exclude feature with specific network groups","text":"<p>Allows to exclude features that are associated to a certain group from the selection.  This also extends to all features that are in the same spectral similarity network.  This can be useful to subtract blank-associated features.</p>"},{"location":"home/gui.dashboard/#example_5","title":"Example","text":"<p>In this example, we go through all the filters and observe how they impact the selection.</p> <p></p>"},{"location":"home/gui.dashboard/#downloads-and-general-settings","title":"Downloads and general settings","text":"<p>This field allows to download the individual files for storage or offline use.  For more information about the output files, see here.</p>"},{"location":"home/gui.dashboard/#display","title":"Display","text":"<p>In FERMO v.1.0.0, the dashboard has been completely reworked and now allows for dynamic construction of the user interface.</p> <p></p>"},{"location":"home/gui.installation/","title":"Installation","text":"<p>Detailed information on how to install and run FERMO GUI offline can be found in the README.</p>"},{"location":"home/gui.load/","title":"Usage","text":"<p>On the 'Load Session' page, existing FERMO analysis jobs can be loaded.</p> <p>The job/session file can be loaded by clicking on the 'Load Session' button at the bottom of the page.</p>"},{"location":"home/gui.load/#load-existing-job","title":"Load existing job","text":"<p>This field allows to load an existing FERMO job (e.g. created by a colleague). </p> <p>Simply paste the FERMO job ID into the field, and click on the 'Load Session' button.</p> <p>Nota bene: FERMO jobs are deleted after 30 days. Users are advised to download and store the FERMO session.json files locally.</p>"},{"location":"home/gui.load/#example","title":"Example","text":""},{"location":"home/gui.load/#session-file-upload","title":"Session file upload","text":"<p>This field allows to upload a previously downloaded session.json file.  This can also be used to reload parameters of a previous job (see Start Analysis for details).</p> <p>Nota bene: session files from FERMO &lt;v1.0.0 are not accepted</p>"},{"location":"home/gui.load/#example_1","title":"Example","text":""},{"location":"home/gui.overview/","title":"Overview","text":""},{"location":"home/gui.overview/#about","title":"About","text":"<p>This is the documentation for FERMO GUI, which includes the online version of FERMO.</p> <p>There are three main pages of FERMO GUI:</p> <ul> <li>Start Analysis</li> <li>Load Session</li> <li>Dashboard</li> </ul>"},{"location":"home/gui.overview/#start-analysis","title":"Start Analysis","text":"<p>This page allows to start new analysis jobs, upload files, and set parameter settings.  Furthermore, it can be used to clone parameter settings of previous FERMO jobs.</p> <p>For more information, see here.</p>"},{"location":"home/gui.overview/#load-session","title":"Load Session","text":"<p>This page allows to load previously executed jobs, or upload downloaded FERMO session files.</p> <p>For more information, see here.</p>"},{"location":"home/gui.overview/#dashboard","title":"Dashboard","text":"<p>The dashboard page is the main element of FERMO GUI: it allows for data analysis and download of result files.</p> <p>For more information, see here.</p>"},{"location":"home/gui.start/","title":"Usage","text":"<p>On the 'Start Analysis' page, new FERMO analysis jobs can be initiated.</p> <p>Files can be uploaded using the individual upload fields.  The analysis job can be started by clicking on the 'Start Analysis' button at the bottom of the page.</p> <p>The only file required is a peaktable file - all other files are optional.</p> <p>While default parameters are provided, they need to be adjusted according to the requirements of the data.</p> <p>Nota bene: FERMO online versions employs some restrictions with regard to file size, computation time, and data storage to prevent excessive usage. Details can be found on the 'Start Analysis' page.</p>"},{"location":"home/gui.start/#example","title":"Example","text":""},{"location":"home/gui.start/#load-parameters","title":"Load parameters","text":"<p>This field allows to clone the parameter settings of a previous FERMO job (e.g. created by a colleague). </p> <p>To load the parameters, simply paste the FERMO job ID into the field, and click on the 'Load Job Parameters' button.</p> <p>Nota bene: files and filenames are not retained and must be newly uploaded.</p>"},{"location":"home/gui.start/#example_1","title":"Example","text":""},{"location":"home/gui.start/#troubleshooting","title":"Troubleshooting","text":"<p>If an old job ID does not exist anymore but you still want to clone the parameters, you can simply upload a previously created FERMO session.json file under Load Session. Take the newly generated FERMO job ID and use it to load the parameters.</p>"},{"location":"home/gui.start/#peaktable","title":"Peaktable","text":"<p>The peaktable is the only file that is mandatory for analysis.</p> <p>See here for more information on the required peaktable format.</p>"},{"location":"home/gui.start/#msms","title":"MS/MS","text":"<p>(optional)</p> <p>Availability of MS/MS data is very important for annotation tasks.  If MS/MS data is available, it is highly recommended to include such a file in the analysis. However, even if MS/MS data is provided, usually not all molecular features have associated MS/MS information, and FERMO will ignore such features in annotation tasks requiring MS/MS data.</p> <p>See here for more information on the required MS/MS file format.</p> <p>By default, FERMO performs quality-filtering of MS/MS fragments. See here for additional information.</p>"},{"location":"home/gui.start/#group-metadata","title":"Group Metadata","text":"<p>(optional)</p> <p>Group Metadata allows to provide sample context information.  Using sample grouping, the abundance of features across groups (area, intensity) can be compared.  Additionally, sample blanks can be designated to identify background ions.</p> <p>See here for more information on the required Group Metadata file format.</p>"},{"location":"home/gui.start/#phenotype-data","title":"Phenotype Data","text":"<p>(optional)</p> <p>Phenotype data allows to correlate feature abundance with a phenotype/bioactivity signal.  FERMO supports three different data formats/strategies:</p> <ul> <li>qualitative phenotype data</li> <li>percentage activity-based quantitative data</li> <li>concentration-based quantitative data</li> </ul> <p>See here for more information on the required Phenotype Data file format.</p>"},{"location":"home/gui.start/#spectral-library","title":"Spectral Library","text":"<p>(optional)</p> <p>FERMO accepts a user-provided spectral library for feature annotation.  Spectral library matching can be performed with two different algorithms: </p> <ul> <li>Modified Cosine: Ideal to detect close similarity.</li> <li>MS2DeepScore: Can detect also distant similarity.</li> </ul> <p>Ideally, a library targeted towards the research question/organism is used. This can help to reduce the chance of non-sensical spurious hits (e.g. matching of human metabolites against a bacterial dataset.)</p> <p>See here for a collection of different spectral libraries.</p> <p>See here for more information on the required Spectral Library file format.</p>"},{"location":"home/gui.start/#ms2query-annotation","title":"MS2Query Annotation","text":"<p>(optional)</p> <p>FERMO accepts result files coming from the MS2Query annotation program. While previous versions of FERMO employed an inbuilt version of MS2Query, this has been discontinued due to integration issues. Therefore, MS2Query needs to be run separately by the user. </p> <p>See here for more information on the required MS2Query results file format.</p>"},{"location":"home/gui.start/#antismash-job-integration","title":"antiSMASH Job Integration","text":"<p>(optional)</p> <p>FERMO can also integrate results coming from the popular genome mining software antiSMASH. For this, FERMO requires only an existing antiSMASH job ID.</p> <p>Keep in mind that only a single genome is used for annotation.  In this case, all samples are assumed to result from organism the genome is associated with.</p> <p>See here for more information on the annotation logic.</p> <p>See here for more information on the expected format.</p>"},{"location":"home/gui.start/#notification-settings","title":"Notification Settings","text":"<p>(optional, only in online mode)</p> <p>If an email address was provided, a notification will be sent on job completion (success or failure).</p>"},{"location":"home/gui.usage/","title":"Gui.usage","text":"<p>TBA (MMZ 20.05.24)</p>"},{"location":"home/input_output/","title":"Input/Output","text":"<p>FERMO accepts several input data formats and produces a variety of output data files, as described below.</p>"},{"location":"home/input_output/#input-data-formats","title":"Input Data Formats","text":"<p>This is a comprehensive list of input data formats currently accepted by FERMO. Detailed information can be found below. If your favorite data format is missing, feel free to contact the developers.</p> Data type Accepted formats Mandatory/Optional Example Molecular feature peaktable mzmine3 Mandatory mzmine3 MS/MS spectrum information mgf(mzmine3) Optional mgf(mzmine3) Group metadata fermo Optional fermo Phenotype/bioactivity data qualitative,quantitative-percentage,quantitative-concentration Optional qualitative,quantitative-percentage,quantitative-concentration Spectral library mgf(GNPS) Optional mgf(GNPS) MS2Query results file ms2query(fermo-modified) Optional ms2query(fermo-modified) AntiSMASH results antiSMASH(KnownClusterBlast) Optional antiSMASH(KnownClusterBlast)"},{"location":"home/input_output/#output-data-formats","title":"Output Data Formats","text":"<p>All output files created by FERMO are written into a <code>results</code> directory that is created in the directory in which the provided peaktable file resides.</p> <p>All output files are starting with <code>out.fermo</code> and ending with a suffix that specifies their type (see the table below):</p> Suffix Description .session.json Main output of fermo_core, is used for visualization in fermo_gui .graphml Spectral similarity (=molecular) network file, can be imported into Cytoscape .fermo.abbrev.csv Feature annotation file, can be imported into Cytoscape .fermo.full.csv Modified full peaktable, can be used in downstream processing .log A log file describing the steps performed and any warnings/errors that were registered. .summary.txt A summary of the steps taken and parameters applied in human-readable form. Can be adapted for the methods section of a manuscript (beware of copy-pasting and a potential flag by a plagiarism software)"},{"location":"home/input_output/#details-input-data-formats","title":"Details Input Data Formats","text":""},{"location":"home/input_output/#molecular-feature-peaktable","title":"Molecular feature peaktable","text":"<p>The peaktable must:</p> <ul> <li>Derive from liquid chromatography electrospray ionization (tandem) mass spectrometry (LC-ESI-(MS/)MS)</li> <li>Constitute of samples acquired at identical concentration/dilution and identical injection volume</li> <li>Be acquired using untargeted data-dependent acquisition (DDA)</li> <li>Be of high resolution (ideally, &lt;20 ppm mass deviation)</li> <li>Be in a single polarity (either positive or negative ion mode)</li> </ul>"},{"location":"home/input_output/#mzmine3","title":"mzmine3","text":"<p>Peaktable produced by created by MZmine (version 3.x). To generate the peaktable in MZmine3, perform the usual pre-processing steps and export the table using <code>Feature list methods -&gt; Export feature list -&gt; Molecular networking files</code>. In the resulting window (see below), keep defaults except <code>Filter rows: ALL</code>, <code>Feature intensity: Height</code>, and <code>CSV export: COMPREHENSIVE</code>.</p> <p></p> <p>For an example, see here.</p>"},{"location":"home/input_output/#msms-spectrum-information","title":"MSMS spectrum information","text":""},{"location":"home/input_output/#mgfmzmine3","title":"mgf(mzmine3)","text":"<p>The MS/MS (MS2) fragmentation data file is automatically generated during MZmine (version 3.x) peaktable export (see above).</p> <pre><code>BEGIN IONS\nFEATURE_ID=13\nPEPMASS=610.3346\nSCANS=13\nRTINSECONDS=572.766\nCHARGE=0+\nMSLEVEL=2\n98.8724 4.9E1\n103.7477 2.9E1\n... ...\nEND IONS\n</code></pre>"},{"location":"home/input_output/#group-metadata","title":"Group Metadata","text":""},{"location":"home/input_output/#fermo","title":"fermo","text":"<p><code>.csv</code>-file (see example below). Specifically, the file must have:</p> <ul> <li>A single column labeled <code>sample_name</code> specifying the samples IDs. Entries in this column must be unique.</li> <li>One or more columns specifying group categories. In these columns, all values must be strings (no numbers).</li> </ul> <p>Optionally, the file may have:</p> <ul> <li>One or more samples designated as sample blanks with the signal word <code>BLANK</code>.</li> </ul> <pre><code>sample_name,phylogroup,medium\nsample1.mzXML,group1,mediumA\nsample2.mzXML,group1,mediumB\nsample3.mzXML,group2,mediumA\nsample4.mzXML,group2,mediumB\nsample1.mzXML,BLANK,BLANK\nsampleN.mzXML,groupX,mediumY\n</code></pre>"},{"location":"home/input_output/#phenotype-bioactivity-data","title":"Phenotype (bioactivity) data","text":""},{"location":"home/input_output/#qualitative","title":"qualitative","text":"<p><code>.csv</code>-file (see example below). Specifically, the file must have:</p> <ul> <li>A single column labeled <code>sample_name</code> specifying the samples considered \u201cpositive\u201d</li> </ul> <pre><code>sample_name\nsample1.mzXML\nsample2.mzXML\nsample3.mzXML\nsampleN.mzXML\n</code></pre>"},{"location":"home/input_output/#quantitative-percentage","title":"quantitative-percentage","text":"<p><code>.csv-file</code> (see example below). Specifically, the file must have:</p> <ul> <li>A column labeled <code>sample_name</code> specifying the sample identifiers </li> <li>A column labeled <code>well</code> specifying the well number. Numbers in this column must be occurring only once. Note that the label <code>well</code> stands for any measurement reference (vial, rack position, etc.)</li> <li>One to six columns labeled with <code>assay:...</code>, which indicate different assays (or one assay at different concentrations). The values indicate the percentage inhibition measured for this sample. Negative percentages are considered as 0 (zero).</li> <li>Measurements for at least 10 samples</li> </ul> <pre><code>sample_name,well,assay:assay1_conc1,assay:assay1_conc2,assay2_conc1\nsample1.mzXML,1,6,30,98\nsample1.mzXML,2,-5,22,80\nsample2.mzXML,3,3,15,-20\nsample2.mzXML,4,18,17,32\nsampleN.mzXML,M,X,Y,Z\n</code></pre>"},{"location":"home/input_output/#quantitative-concentration","title":"quantitative-concentration","text":"<p><code>.csv</code>-file (see example below). Specifically, the file must have:</p> <ul> <li>A column labeled <code>sample_name</code> specifying the sample identifiers </li> <li>A column labeled <code>well</code> specifying the well number. Numbers in this column must be occurring only once. Note that the label <code>well</code> stands for any measurement reference (vial, rack position, etc.)</li> <li>One to six columns labeled with <code>assay:...</code>, which indicate different assays. The values indicate the minimal inhibitory concentration and must be positive numbers. Samples with no measured activity are indicated with 0 (zero).</li> <li>Measurements for at least 10 samples</li> </ul> <pre><code>sample_name,well,assay:bactericidal\nsample1.mzXML,1,256\nsample1.mzXML,2,256\nsample1.mzXML,3,64\nsample1.mzXML,4,32\nsample1.mzXML,5,0\nsample1.mzXML,6,0\nsampleN.mzXML,M,X\n</code></pre>"},{"location":"home/input_output/#spectral-library","title":"Spectral Library","text":""},{"location":"home/input_output/#mgfgnps","title":"mgf(GNPS)","text":"<p>A <code>.mgf</code>-file (Mascot generic format) as produced by GNPS. Specifically, this file must:</p> <ul> <li>Start with <code>BEGIN IONS</code></li> <li>Have a <code>PEPMASS</code> entry indicating the precursor ion m/z (must not be 0.0 or 1.0)</li> <li>Have a number of fragment-intensity pairs</li> <li>End with <code>END IONS</code></li> </ul> <p>Optionally, the following fields are supported: - <code>SMILES</code> - <code>INCHI</code>  - <code>NAME</code></p> <p>Other fields may be present but are not actively parsed.</p> <pre><code>BEGIN IONS\nPEPMASS=1649.45\nNAME=Fakeomycin\nSMILES=CCCCCC\nINCHI=AKFVOKPQHFBYCA\nSCANS=1\n172.073334  80.0\n190.080322  201.0\n... ...\nEND IONS\n</code></pre>"},{"location":"home/input_output/#ms2query-results-file","title":"MS2Query Results File","text":""},{"location":"home/input_output/#ms2queryfermo-modified","title":"ms2query(fermo-modified)","text":"<p>A <code>.csv-file</code> (MSQuery version 1.4.0). Specifically, it must have:</p> <ul> <li>A column labeled <code>id</code> with numbers matching molecular feature IDs (not found in standard MS2Query results files</li> <li>A column labeled <code>analog_compound_name</code></li> <li>A column labeled <code>ms2query_model_prediction</code></li> <li>A column labeled <code>precursor_mz_difference</code></li> <li>A column labeled <code>precursor_mz_analog</code></li> <li>A column labeled <code>smiles</code></li> <li>A column labeled <code>inchikey</code></li> <li>A column labeled <code>npc_class_results</code></li> </ul> <pre><code>ms2query_model_prediction,precursor_mz_difference,precursor_mz_query_spectrum,precursor_mz_analog,inchikey,analog_compound_name,smiles,id,npc_class_results\n0.3459,47.0324,247.1276,294.1600,AAAAAAAAAA,\u201dfakeomycin\u201d,CCCCC,3,Carboline alkaloids\n</code></pre>"},{"location":"home/input_output/#antismash-results","title":"AntiSMASH Results","text":""},{"location":"home/input_output/#online-fermo_gui","title":"Online (<code>fermo_gui</code>)","text":"<p>In the online version, FERMO requires only an existing antiSMASH job ID, which it will use to automatically fetch the required data.  An antiSMASH job ID has the format <code>taxon-aaaaaaaa-bbbb-cccc-dddd-eeeeeeeeee</code>.  The ID can be found in the antiSMASH notification email or in the URL when browsing the job results.</p>"},{"location":"home/input_output/#offline-cli-fermo_core","title":"Offline CLI (<code>fermo_core</code>)","text":"<p>The <code>fermo_core</code> CLI requires a single antiSMASH results directory (at the time of writing, version 7.1) containing a <code>knownclusterblast</code> results directory.</p>"},{"location":"home/why_fermo/","title":"Why FERMO?","text":"<p>FERMO is dashboard app for metabolomics data analysis. It aims to make the annotation and prioritization of relevant metabolites convenient, reproducible, and comprehensive.</p>"},{"location":"home/why_fermo/#supported-data-types","title":"Supported data types","text":"<ul> <li>LC-MS(/MS) metabolomics data</li> <li>Genomics data</li> <li>Phenotype (bioactivity) data</li> <li>Environmental/group (meta)data</li> </ul>"},{"location":"home/why_fermo/#supported-analyses","title":"Supported analyses","text":"<ul> <li>Molecular feature filtering</li> <li>Spectral similarity (molecular) networking</li> <li>Feature annotation and identification</li> <li>Phenotype data correlation</li> <li>Determination of fold changes</li> <li>Calculation of prioritization scores</li> </ul>"},{"location":"home/why_fermo/#using-fermo-in-data-analysis","title":"Using FERMO in data analysis","text":"<p>In a typical metabolomics analysis, hundreds or thousands of molecular features are routinely detected. This wealth of information makes it challenging to manually identify and prioritize relevant molecules for further investigations. FERMO supports the prioritization task by an automated annotation pipeline, calculation of prioritization scores, and an intuitive graphical user interface. This allows to rapidly inspect data, formulate hypotheses, and determine relevant features.</p>"},{"location":"home/why_fermo/#benefits-of-fermo","title":"Benefits of FERMO","text":"<ul> <li>Interface: FERMO comes as intuitive dashboard allowing to prioritize data with a few clicks.</li> <li>Flexibility: FERMO only requires a feature peaktable - everything else is optional.</li> <li>Tool integration: FERMO integrates many different tools into a single pipeline.</li> <li>Modularity: FERMO is fully modular and allows for easy enabling/disabling of functionality.</li> <li>Reproducibility: FERMO's input parameter file allows for reproducible analysis runs.</li> <li>Prioritization scores: FERMO combines the individual modules in meta-scores useful for prioritization.</li> </ul>"},{"location":"home/why_fermo/#limitations-of-fermo","title":"Limitations of FERMO","text":"<ul> <li>Pre-processing: FERMO does not accept raw data and needs a pre-processed feature peaktable.</li> <li>Data compatibility: FERMO needs DDA-ESI-LC-MS(/MS) input data. Currently, accepted input file formats are limited.</li> <li>Scale: FERMO's interface is not intended to display a large number (&gt;100) of samples. While there is not fixed threshold, users intending to run large-scale analyses are advised to look into running <code>fermo_core</code> locally. </li> </ul>"},{"location":"modules/annotation.adduct/","title":"Adduct Ions","text":""},{"location":"modules/annotation.adduct/#description","title":"Description","text":"<p>This module annotates the ion identity of co-occurring molecular features (features with overlapping retention time ranges). In electrospray ionization (ESI), a single molecule can form adducts with different ions, resulting in different ion species and different molecular features. Therefore, annotation of related ion species does not only allow to reduce redundancy, but also gives information about the identity of the molecule (e.g. molecular weight). The annotation algorithm works as follows:</p> <ul> <li>For each sample, overlapping features are determined by simplifying features to one-dimensional vectors, denoted with two points x1 (retention time of the start of the feature) and x2 (end of the feature). For two features A,B with A(x1,x2) and B(x1,x2), if any of (Ax2 &lt; Bx1) or (Bx2 &lt; Ax1) is true, features do not overlap.</li> <li>For overlapping features, m/z values are compared. One of the two features is considered the [M+H]+ (positive mode) or the [M-H]- (negative mode) \u2018base\u2019 adduct, while the other peak is considered another adduct. If any of the registered mathematical operations (one for each different ion type) leads to a m/z match of the \u2018base\u2019 and the \u2018adduct\u2019 inside a user-specified mass deviation difference <code>mass_dev_ppm</code>, a match is registered.</li> </ul>"},{"location":"modules/annotation.adduct/#parameters","title":"Parameters","text":"<ul> <li><code>mass_dev_ppm</code>: the maximum allowed mass deviation difference to constitute a match.</li> </ul>"},{"location":"modules/annotation.adduct/#limitations","title":"Limitations","text":"<ul> <li>The algorithm currently does not triangulate the parent mass. Interpretation is the responsibility of the user.</li> </ul> <p>Currently supported positive ion mode adduct types are:</p> <ul> <li><code>sodium_adduct [M+Na]+</code></li> <li><code>dimer_sodium_adduct [2M+Na]+</code></li> <li><code>triple_h_adduct [M+3H]3+</code></li> <li><code>iron56 [M+56Fe-2H]+</code></li> <li><code>dimer_double [M+2H]2+ and [2M+H]+</code></li> <li><code>ammonium [M+NH4]+</code></li> <li><code>potassium [M+K]+</code></li> <li><code>water_add [M+H2O+H]+</code></li> <li><code>water_loss [M-H2O+H]+</code></li> <li><code>plus1_isotope [M+1+H]+</code></li> <li><code>plus2_isotope [M+2+H]+</code></li> <li><code>plus3_isotope [M+3+H]+</code></li> <li><code>plus4_isotope [M+4+H]+</code></li> <li><code>plus5_isotope [M+5+H]+</code></li> <li><code>double_plus1 [M+1+2H]2+</code></li> <li><code>double_plus2 [M+2+2H]2+</code></li> <li><code>double_plus3 [M+3+2H]2+</code></li> <li><code>double_plus4 [M+4+2H]2+</code></li> <li><code>double_plus5 [M+5+2H]2+</code></li> </ul> <p>Currently supported negative ion mode adducts are:</p> <ul> <li><code>chloride_adduct [M+Cl]-</code></li> <li><code>double_dimer_pair_neg [M-2H]2- and [2M-H]-</code></li> <li><code>bicarbonate_adduct [M+HCO2]-</code></li> <li><code>tfa_adduct [M+TFA-H]- (trifluoroacetate)</code></li> <li><code>acetate_adduct [M+HAc-H]-</code></li> </ul>"},{"location":"modules/annotation.as_kcb/","title":"antiSMASH KCB","text":""},{"location":"modules/annotation.as_kcb/#description","title":"Description","text":"<p>This experimental module annotates molecular features using results from the KnownClusterBlast algorithm of the popular genome annotation tool antiSMASH. KnownClusterBlast performs a multigene BLAST comparison against entries in the MIBiG repository, and registers significant hits with a score of percent similarity. The FERMO module takes the antiSMASH output, parses the KnownClusterBlast matches, selects matches exceeding a certain similarity score, and extracts the metabolites experimentally associated with the MIBiG entries. From this subset of molecules, a targeted in silico MS/MS spectral library is created using CFM-ID and used for spectral library matching (for more information, see fermo_core_extras. The assumption is that if two genomes contain two similar biosynthetic gene clusters (BGCs), the metabolites resulting from these two BGCs should also show chemical similarity, with similar MS/MS fragmentation that should allow spectral matching. Matches would likely be analogs (not exact matches), but could nevertheless help to annotate a feature.</p>"},{"location":"modules/annotation.as_kcb/#parameters-modified-cosine","title":"Parameters <code>modified cosine</code>","text":"<ul> <li><code>fragment_tol</code>: the absolute tolerance for matching two MS/MS fragments, in m/z units.</li> <li><code>min_nr_matched_peaks</code>: minimum number of fragments that must be matched between two MS/MS fragmentation spectra.</li> <li><code>score_cutoff</code>: minimum score to consider a match</li> <li><code>max_precursor_mass_diff</code>: maximum allowed difference between precursor m/z of feature and library m/z.</li> </ul>"},{"location":"modules/annotation.as_kcb/#parameters-ms2deepscore","title":"Parameters <code>ms2deepscore</code>","text":"<ul> <li><code>score_cutoff</code>: minimum score to consider a match</li> <li><code>max_precursor_mass_diff</code>: maximum allowed difference between precursor m/z of feature and library m/z.</li> </ul>"},{"location":"modules/annotation.as_kcb/#limitations","title":"Limitations","text":"<ul> <li>Currently, this module accepts a single antiSMASH results folder from the analysis of a single genome. Therefore, all LC-MS samples annotated by this method must also derive from the organism the genome is associated with. In the future, this will be expanded to multiple genomes as well. </li> <li>The definition of similarity in the context of BGCs: while it is assumed that two similar BGCs should produce similar metabolites, there are many exceptions, and there are cases where a single BGC can produce chemically very different molecules. </li> <li>All spectra in the MIBiG spectral library were generated by in silico MS/MS fragmentation, given the poor coverage with experimentally generated spectra. In silico fragmentation prediction may not work equally well for all types of molecules and may lead to false positive and false negative matches. Therefore, caution in the interpretation of results is advised. In the future, the in silico generated spectral library may be replaced with experimentally spectra.</li> </ul>"},{"location":"modules/annotation.fragment/","title":"Fragments","text":""},{"location":"modules/annotation.fragment/#description","title":"Description","text":"<p>This module performs feature annotation by matching single MS/MS fragments against a library of annotated MS/MS fragments. Therefore, matches can help to annotate features and identify molecules. The annotation algorithm works as follows:</p> <ul> <li>For each feature, iterate through fragments and compare them against a library of annotated fragments.</li> <li>If the m/z values of a fragment and a library fragment match (are inside a specified mass deviation), annotate the feature.</li> </ul>"},{"location":"modules/annotation.fragment/#parameters","title":"Parameters","text":"<ul> <li><code>mass_dev_ppm</code>: the maximum allowed mass deviation difference to constitute a match</li> </ul>"},{"location":"modules/annotation.fragment/#limitations","title":"Limitations","text":"<ul> <li>Fragment matches can often be spurious (a single fragment m/z can correspond to many different molecule substructures) or can result from random noise. Therefore, they must not be trusted blindly.</li> <li>Currently, only positive ion mode fragments are supported.</li> <li>Currently, only y2- and b2 fragments resulting from (proteinogenic) peptides are supported (all calculated as [M+H]+ adducts). More information can be found on fermo_core_extras. </li> </ul>"},{"location":"modules/annotation.loss/","title":"Neutral Loss","text":""},{"location":"modules/annotation.loss/#description","title":"Description","text":"<p>This module performs feature annotation by matching neutral losses (=precursor m/z - fragments) against a library of annotated neutral losses (adapted from Kersten et al 2011, Kersten et al 2013, Correa&amp;Niessen 2017 (ISBN:9781118500187)). Such neutral losses can indicate functional groups present in the molecule and help with identification. The annotation algorithm works as follows:</p> <ul> <li>For each feature, iterate through neutral losses and compare them against a library of annotated neutral losses.</li> <li>If the values of a neutral loss and a library neutral loss match (are inside a specified mass deviation), annotate the feature.</li> </ul>"},{"location":"modules/annotation.loss/#parameters","title":"Parameters","text":"<ul> <li><code>mass_dev_ppm</code>: the maximum allowed mass deviation difference to constitute a match</li> <li><code>nonbiological</code>: allows to specify if neutral losses characteristic to non-biological molecules (synthetic chemicals) should be included in the search. This may lead to spurious matches.</li> </ul>"},{"location":"modules/annotation.loss/#limitations","title":"Limitations","text":"<ul> <li>Neutral loss matches can often be spurious (a neutral loss can correspond to many different molecule substructures) or can result from random noise. Therefore, they must not be trusted blindly.</li> </ul>"},{"location":"modules/annotation.ms2query/","title":"MS2Query","text":""},{"location":"modules/annotation.ms2query/#description","title":"Description","text":"<p>For feature annotation, FERMO accepts results created by MS2Query, a machine-learning based annotation algorithm.  MS2Query comes with its own spectral library derived from the GNPS library and can do exact and/or analog matching. For compatibility with FERMO, the MS2Query results file must come with an additional column <code>id</code> that matches the IDs of the molecular features (see here for details). For more information on the algorithmm see the MS2Query Documentation.</p>"},{"location":"modules/annotation.ms2query/#parameters","title":"Parameters","text":"<ul> <li><code>score_cutoff</code>: minimum score in <code>ms2query_model_prediction</code> to consider a match to be valid. Matches with a score lower than <code>score_cutoff</code> are not considered for molecular feature annotation.</li> </ul>"},{"location":"modules/annotation.userlib/","title":"User Library","text":""},{"location":"modules/annotation.userlib/#description","title":"Description","text":"<p>This module compares molecular features against a user-provided (targeted) spectral library. The matching algorithm works as follows:</p> <ul> <li>For each feature, its MS/MS fragmentation spectrum is matched pairwise with each library spectrum, using one or more different algorithms described below. </li> <li>For the <code>modified cosine</code> algorithm, library matches are only retained if feature and library spectra share a minimum number of matched peaks within a certain fragment tolerance, reach a cutoff score, and are inside a maximum precursor mass difference.</li> <li>For the MS2DeepScore algorithm, library matches are only retained if feature and library spectra reach a certain cutoff score and are inside a maximum precursor mass difference.</li> </ul>"},{"location":"modules/annotation.userlib/#parameters-modified-cosine","title":"Parameters <code>modified cosine</code>","text":"<ul> <li><code>fragment_tol</code>: the absolute tolerance for matching two MS/MS fragments, in m/z units.</li> <li><code>min_nr_matched_peaks</code>: minimum number of fragments that must be matched between two MS/MS fragmentation spectra.</li> <li><code>score_cutoff</code>: minimum score to consider a match</li> <li><code>max_precursor_mass_diff</code>: maximum allowed difference between precursor m/z of feature and library m/z.</li> </ul>"},{"location":"modules/annotation.userlib/#parameters-ms2deepscore","title":"Parameters <code>ms2deepscore</code>","text":"<ul> <li><code>score_cutoff</code>: minimum score to consider a match</li> <li><code>max_precursor_mass_diff</code>: maximum allowed difference between precursor m/z of feature and library m/z.</li> </ul>"},{"location":"modules/annotation.userlib/#limitations","title":"Limitations","text":"<ul> <li>Spectral library matching is relatively slow (especially using the MS2DeepScore algorithm). Ideally, a targeted spectral library should be provided. For a more general library, see MS2Query annotation.</li> </ul>"},{"location":"modules/filter.feature/","title":"Feature Filtering","text":""},{"location":"modules/filter.feature/#description","title":"Description","text":"<p>This module filters molecular features that do not fit specified cutoff settings. It has been observed that under certain circumstances, a large part of molecular features can be attributed to instrument noise Samples 2023. Therefore, FERMO allows to filter irrelevant molecular features from the analysis:</p> <ul> <li>For a given range of relative signal height/height (0-1.0, relative to the feature with the highest intensity), molecular features that are not inside this range in at least one sample are discarded</li> <li>For a given range of relative signal area (0-1.0, relative to the feature with the highest area), molecular features that are not inside this range in at least one sample are discarded</li> </ul>"},{"location":"modules/filter.feature/#parameters","title":"Parameters","text":"<ul> <li><code>filter_rel_int_range_min</code>: specifies the minimum value of relative intensity to retain in analysis</li> <li><code>filter_rel_int_range_max</code>: specifies the maximum value of relative intensity to retain in analysis</li> <li><code>filter_rel_area_range_min</code>: specifies the minimum value of relative area to retain in analysis</li> <li><code>filter_rel_area_range_max</code>: specifies the maximum value of relative area to retain in analysis</li> </ul>"},{"location":"modules/filter.msms/","title":"MS/MS Filtering","text":""},{"location":"modules/filter.msms/#description","title":"Description","text":"<p>This module performs filtering of MS/MS fragmentation spectra of features.  MS/MS spectra regularly contain fragments caused by instrument noise, which obfuscate and prolongate the analysis. </p> <p>By default, FERMO will quality-filter MS/MS fragments and remove the fragment corresponding to the precursor m/z and all fragments +- 10 m/z units around the precursor m/z. These fragments are usually artifacts and do not correspond to any meaningful neutral losses. </p> <p>Additionally, FERMO can remove fragments with a relative intensity lower than a user-specified value (by default: 0.01 i.e. 1% of the base peak). This is recommended to remove noise peaks from the spectrum. Filtering takes place after the initial precursor m/z removal.</p>"},{"location":"modules/filter.msms/#parameters","title":"Parameters","text":"<ul> <li><code>rel_int_from</code>: specifies the minimum relative intensity to retain fragments. If 0.0, all fragments are retained. A value of 0.01 would remove all fragments with an intensity of less than 1% of the most intense fragment.</li> </ul>"},{"location":"modules/metadata.blank/","title":"Blank Assignment","text":""},{"location":"modules/metadata.blank/#description","title":"Description","text":"<p>Sample blanks (i.e. instrument runs without sample injection) are frequently used to determine molecular features that are not associated with the biological variability of a sample (e.g. background ions, instrument noise). Therefore, blank subtraction is an integral part of metabolomics data processing. The algorithm works as follows:</p> <ul> <li>Molecular features only observed in samples designated as \u201cBLANK\u201d are considered blank-associated</li> <li>Molecular features only observed in non-blank samples are never considered blank-associated</li> <li>For each feature observed in both non-blank and blank samples, a user-specified feature value (height or area) across \u201cnon-blank\u201d and \u201cblank\u201d samples is compared using an user-specified algorithm. If the resulting quotient is greater than a user-specified ratio (fold-change), the feature is considered NOT blank-associated, else, it is considered blank-associated. This allows to retain features that are detected in sample blanks due to column retention/bleed.</li> </ul>"},{"location":"modules/metadata.blank/#parameters","title":"Parameters","text":"<ul> <li><code>algorithm</code>: algorithm to summarize value over non-blank samples and sample blanks (mean, median, maximum (highest value across non-blanks/blanks)).</li> <li><code>value</code>: specifies type of value to be considered (height or area)</li> <li><code>factor</code>: determines subtraction of features detected in both blank and non-blank samples.</li> </ul>"},{"location":"modules/metadata.group_fold/","title":"Group Assignment","text":""},{"location":"modules/metadata.group_fold/#description","title":"Description","text":"<p>Samples are frequently grouped to compare intergroup variability (instead of only inter-sample variability). FERMO allows to specify multiple categories of groups (each column in the group metadata file is considered one category), with multiple groups inside each category. For each category, features associated to multiple groups are identified and their relative abundance is calculated as follows:</p> <ul> <li>For each feature, association to the groups of a category is determined.</li> <li>If a feature is detected in two or more groups, user-specified values detected across the samples belonging to each group are summarized via a user-specified algorithm, the values compared pairwise, and the resulting quotient is registered if &gt;= 1.</li> <li>This process is repeated for each specified category</li> </ul>"},{"location":"modules/metadata.group_fold/#parameters","title":"Parameters","text":"<ul> <li><code>algorithm</code>: the algorithm to summarize values across a group with. Possible algorithms are <code>mean</code>, <code>median</code>, and <code>maximum</code> (highest value across samples of a group)</li> <li><code>value</code>: specifies the value to be considered: <code>height</code> (=intensity) or <code>area</code> of feature.</li> </ul>"},{"location":"modules/metadata.group_fold/#limitations","title":"Limitations","text":"<ul> <li>Groups from different categories are never compared. Only categories inside groups are compared.</li> </ul>"},{"location":"modules/networking/","title":"Spectral Similarity","text":""},{"location":"modules/networking/#description","title":"Description","text":"<p>This module annotates molecular features by performing spectral similarity networking (also known as \u201cmolecular networking\u201d coined by the GNPS software). MS/MS fragmentation spectra of features are compared in a pairwise fashion, and features with similar spectra are then grouped. This is based on the observation that similar molecules usually show similar MS/MS fragmentation patterns, and therefore, similar fragmentation patterns indicate related molecules (chemical families). FERMO performs spectral similarity networking as follows:</p> <ul> <li>The modified cosine algorithm Watrous 2012, a robust algorithm most useful to cluster highly similar MS/MS spectra, with a generally low false-positive rate</li> <li>The MS2DeepScore algorithm Huber 2021, a more experimental algorithm capable of detecting distant similarity, but with a higher false-positive detection rate</li> </ul>"},{"location":"modules/networking/#parameters-modified-cosine","title":"Parameters <code>modified cosine</code>:","text":"<ul> <li><code>msms_min_frag_nr</code>: minimum number of fragments a MS/MS fragmentation spectrum must have to be considered in spectral similarity networking</li> <li><code>fragment_tol</code>: the absolute tolerance for matching two MS/MS fragments, in m/z units.</li> <li><code>score_cutoff</code>: minimum score to consider a match</li> <li><code>max_nr_links</code>: maximum number of links to other molecular features any molecular feature is allowed to have in a network.</li> </ul>"},{"location":"modules/networking/#parameters-ms2deepscore","title":"Parameters <code>ms2deepscore</code>:","text":"<ul> <li><code>score_cutoff</code>: minimum score to consider a match</li> <li><code>msms_min_frag_nr</code>: minimum number of fragments a MS/MS fragmentation spectrum must have to be considered in spectral similarity networking.</li> <li><code>max_nr_links</code>: maximum number of links to other molecular features any molecular feature is allowed to have in a network.</li> </ul>"},{"location":"modules/networking/#limitations","title":"Limitations","text":"<ul> <li>MS/MS fragmentation spectra are needed for spectral similarity networking. Sometimes, molecular features lack this information and are excluded from the networking.</li> <li>Given the difficulty in objectively quantifying chemical similarity and the arbitrary nature of cutoff scores, spectral similarity (sub)networks can be drawn in various ways, and even small changes in parameter settings can lead to differences in connectivity. Likewise, different algorithms can result in different networks. Therefore, spectral similarity networking should not be seen as \u201cground truth\u201d and should be interpreted with caution.</li> </ul>"},{"location":"modules/overview/","title":"Modules Overview","text":"<p>FERMO functionality is separated in modules: each module has a certain functionality and takes certain parameters that modify its behavior. All modules are optional and can be switched on/off as desired.</p> <p>Modules can be separated into two types:</p> <ul> <li><code>core_modules</code>: run by default and must be turned off explicitly</li> <li><code>additional_modules</code>: are disabled by default (e.g. because they need specific input files) and must be turned on explicitly</li> </ul> <p>In the FERMO GUI, these parameters can be set using the input forms. If you are running FERMO in command line mode, see the section Parameters for information about setting up the parameter file.</p>"},{"location":"modules/overview/#core_modules","title":"<code>core_modules</code>","text":"<ul> <li>Adduct Annotation</li> <li>Neutral Loss Annotation</li> <li>Fragment Annotation</li> <li>Spectral Similarity (Molecular) Networking</li> </ul>"},{"location":"modules/overview/#additional_modules","title":"<code>additional_modules</code>","text":"<ul> <li>Feature Filtering</li> <li>MS/MS Filtering</li> <li>Blank Assignment</li> <li>Group Assignment</li> <li>Phenotype Qualitative</li> <li>Phenotype Quantitative-Percentage</li> <li>Phenotype Quantitative-Concentration</li> <li>Spectral Library Annotation</li> <li>MS2Query Annotation</li> <li>antiSMASH KnownClusterBlast Annotation</li> <li>Feature Scores Calculation</li> <li>Sample Scores Calculation</li> </ul>"},{"location":"modules/phenotype.qualitative/","title":"Qualitative","text":""},{"location":"modules/phenotype.qualitative/#description","title":"Description","text":"<p>The \u201cqualitative\u201d module takes qualitative phenotype/bioactivity data.  Samples are either considered \u201cpositive\u201d or \u201cnegative\u201d.  The algorithm works as follows:</p> <ul> <li>Features exclusively detected in the \u201cpositive\u201d samples are considered phenotype/bioactivity-associated. </li> <li>Features exclusively detected in the \u201cnegative\u201d samples are considered NOT phenotype/bioactivity-associated. </li> <li>For features detected in both \u201cpositive\u201d and \u201cnegative\u201d samples, a user-specified feature value (height or area) across \u201cpositive\u201d and \u201cnegative\u201d samples is compared using a user-specified algorithm. If the resulting quotient is greater than a user-specified ratio (fold-change), the feature is considered phenotype/bioactivity-associated; else, it is not. This allows to retain features that may be bioactivity-associated but are present in sub-inhibitory concentrations in the \u201cnegative\u201d samples (lack of phenotypic/bioactivity readout). The fold-change is then registered as the phenotype score.</li> </ul>"},{"location":"modules/phenotype.qualitative/#parameters","title":"Parameters","text":"<ul> <li><code>factor</code>: the user-specified ratio (fold change) to differentiate features detected in both \u201cpositive\u201d and \u201cnegative\u201d samples.</li> <li><code>value</code>: the value used in the determination of the quotient: either \u201cheight\u201d or \u201carea\u201d.</li> <li><code>algorithm</code>: the algorithm to summarize values over \u201cpositive\u201d and \u201cnegative\u201d samples. Currently possible algorithms are \u201cmean\u201d, \u201cmedian\u201d, and \u201cminmax\u201d. The latter takes the lowest value across \u201cpositive\u201d samples and the highest value across \u201cnegative\u201d samples</li> </ul>"},{"location":"modules/phenotype.qualitative/#limitations","title":"Limitations","text":"<ul> <li>Contrary to Quantitative-Percentage and Quantitative-Concentration, this module does not perform predictions - it rather excludes features that are unlikely to be associated with the observed phenotype.</li> <li>This method assumes that the prerequisites with regard to sample reproducibility are met (see Input/Output).</li> </ul>"},{"location":"modules/phenotype.quant-concentr/","title":"Qualitative-Concentration","text":""},{"location":"modules/phenotype.quant-concentr/#description","title":"Description","text":"<p>The \u201cquantitative-concentration\u201d module takes phenotype/bioactivity data, with the minimum inhibitory concentration per sample specified (concentration/dilution at which a phenotypic signal was still observed). Samples inactive at any concentration are specified with zero.  The algorithm works as follows:</p> <ul> <li>Duplicate measurements per sample are summarized with a user-specified algorithm (mean or median).</li> <li>For each feature occurring in more than two active samples, the area per sample and the concentration measurement per sample are extracted.</li> <li>The concentration are converted to their reciprocals (1 / measurement) or left at zero if the concentration was zero.</li> <li>Both areas and reciprocals of concentration are z-transformed.</li> <li>The transformed areas and percentages are correlated using the Pearson correlation.</li> <li>The resulting p-value is corrected for multiple hypothesis testing using the Bonferroni-method (p-value * number of tested features).</li> <li>If both correlation coefficient and p-value meet a user-specified cutoff, the phenotype information is assigned and the tested feature is considered bioactivity-associated.</li> </ul>"},{"location":"modules/phenotype.quant-concentr/#parameters","title":"Parameters","text":"<ul> <li><code>sample_avg</code>: specifies the algorithm to summarize multiple measurements per sample for same assay. Possible algorithms are <code>mean</code> and <code>median</code>.</li> <li><code>value</code>: specifies value per feature to be correlated with concentration. Only <code>area</code> is currently allowed.</li> <li><code>algorithm</code>: specifies the statistical algorithm to use. Only <code>pearson</code> is currently allowed.</li> <li><code>p_val_cutoff</code>: Maximum Bonferroni-corrected p-value to consider, with zero disabling cutoff filtering for both p-value and coefficient.</li> <li><code>coeff_cutoff</code>: Minimum correlation coefficient to consider, with zero disabling cutoff filtering for both p-value and coefficient.</li> </ul>"},{"location":"modules/phenotype.quant-concentr/#limitations","title":"Limitations","text":"<ul> <li>This method assumes that the prerequisites with regard to sample reproducibility are met (see Input/Output).</li> <li>This method assumes a negative linear relationship between phenotype (concentration) and concentration (area of feature) - the lower the minimal inhibitory concentration, the higher the concentration.</li> <li>This method does not take into account any synergistic or quenching effects</li> </ul>"},{"location":"modules/phenotype.quant-percent/","title":"Quantitative-Percentage","text":""},{"location":"modules/phenotype.quant-percent/#description","title":"Description","text":"<p>The \u201cquantitative-percentage\u201d module takes phenotype/bioactivity data where samples have a measured percentage of bioactivity/phenotype at a specified concentration.  Multiple measurements can be specified for each sample, and multiple assays (each with a determined concentration) can be provided. The algorithm works as follows:</p> <ul> <li>All percentage values lower than zero are set to zero.</li> <li>Duplicate measurements per sample are summarized with a user-specified algorithm (mean or median).</li> <li>For each feature occurring in more than two active samples, the area per sample and the percentage measurement per sample are extracted and z-transformed.</li> <li>The transformed areas and percentages are correlated using the Pearson correlation.</li> <li>The resulting p-value is corrected for multiple hypothesis testing using the Bonferroni-method (p-value * number of tested features)</li> <li>If both correlation coefficient and p-value meet a user-specified cutoff, the phenotype information is assigned and the tested feature is considered bioactivity-associated</li> </ul>"},{"location":"modules/phenotype.quant-percent/#parameters","title":"Parameters","text":"<ul> <li><code>sample_avg</code>: specifies the algorithm to summarize multiple measurements per sample for same assay. Possible algorithms are <code>mean</code> and <code>median</code>.</li> <li><code>value</code>: specifies value per feature to be correlated with percentage. Only <code>area</code> is currently allowed.</li> <li><code>algorithm</code>: specifies the statistical algorithm to use. Only <code>pearson</code> is currently allowed.</li> <li><code>p_val_cutoff</code>: Maximum Bonferroni-corrected p-value to consider, with zero disabling cutoff filtering for both p-value and coefficient.</li> <li><code>coeff_cutoff</code>: Minimum correlation coefficient to consider, with zero disabling cutoff filtering for both p-value and coefficient.</li> </ul>"},{"location":"modules/phenotype.quant-percent/#limitations","title":"Limitations","text":"<ul> <li>This method assumes that the prerequisites with regard to sample reproducibility are met (see Input/Output).</li> <li>This method assumes a positive linear correlation between phenotype (percentage) and concentration (area of feature).</li> <li>This method does not take into account any synergistic or quenching effects</li> </ul>"},{"location":"modules/scores.features/","title":"Feature Scores","text":""},{"location":"modules/scores.features/#description","title":"Description","text":"<ul> <li>Phenotype score: summarizes the phenotype information: assign the highest determined score (fold-change or coefficient); else, assign zero. The higher the phenotype score, the more likely it is that the feature is indeed phenotype-associated. For the Qualitative Phenotype Module, the score is the fold-change that was determined, while for the Quantitative-Percentage and the Quantitative-Concentration, it is the maximum coefficient score that was found across all assays.</li> <li>Novelty score: summarizes annotation information: if the feature had any library match using one of the algorithms, subtract the highest determined score from one; else, assign zero. The higher the novelty score, the more likely that the molecule is yet unknown.</li> </ul>"},{"location":"modules/scores.samples/","title":"Sample Scores","text":""},{"location":"modules/scores.samples/#description","title":"Description","text":"<ul> <li>Diversity score: summarizes the chemistry that is found in this sample, compared to all other samples. Here, spectral similarity networks are taken as proxy for chemical families. For each spectral similarity networking algorithm, the number of detected networks for this sample is divided by the total number of networks, with the quotient being the score. Only the highest quotient across all networking algorithms is retained. The higher the score, the more different chemistry can be observed in the sample. Diversity scores strongly depend of networking parameters and must only be considered for a single fermo analysis run.</li> <li>Specificity score: summarizes the chemistry that is specific to this sample, compared to the other samples. For each networking algorithm, the number of detected networks for this sample is subtracted by the number of networks that were also observed in other samples and divided by the total number of networks, with the quotient being the score. Again, only the highest quotient across all networking algorithms is retained. The higher the score, the more chemistry is specific for the individual sample. Diversity scores strongly depend of networking parameters and must only be considered for a single fermo analysis run.</li> <li>Mean novelty score: The mean novelty scores of all features in this sample.</li> </ul>"}]}